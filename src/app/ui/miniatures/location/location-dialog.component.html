<dma-dialog title="Miniature Locations" (cancel)="onCancel()" (save)="onSave()">
  <p>
    The order of locations is relevant. The first location that matches a miniature is associated with the miniature.
  </p>

  <div class="locations" cdkDropList (cdkDropListDropped)="onDropLocation($event)">
    @for (location of locations; track location) {
      <div class="location" cdkDrag (click)="onEdit(location)">
        <location class="name" [label]="location.name" [type]="location.style()"></location>
        @if (location.summaries().length) {
          <div class="filters">
            @for (summary of location.summaries(); track summary) {
              <div>{{ summary }}</div>
            }
          </div>
        } @else {
          <div>(empty)</div>
        }

        <button mat-icon-button color="primary" (click)="onAdd(location)"><mat-icon>edit</mat-icon></button>
        <button mat-icon-button color="primary" (click)="onDelete(location)"><mat-icon>delete</mat-icon></button>

        <location *cdkDragPreview class="name" [label]="location.name" [type]="location.style()"></location>
      </div>
    }
  </div>
</dma-dialog>
